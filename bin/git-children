#!/bin/sh

if [ $# -ne 1 ]; then
  echo 'Usage: git children COMMIT-LIKE' >&2
  exit 1
fi  

ref=$(git rev-parse $1)
space=''
for b in $(git branch | grep -v 'detached from HEAD' | sed s/^..//); do
  if [ "$(git rev-parse "$b")" = "$ref" ]; then continue; fi
  if [ "$(git merge-base "$b" "$ref")" = "$ref" ]; then
    echo -n "$space$b"
    space=' '
  fi
done

if [ -n "$space" ]; then
  echo
fi
